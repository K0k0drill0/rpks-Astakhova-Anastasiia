Билет №16:
1.  Основные методы для работы с коллекциями. Классы Collections, Arrays.
2. 	Redis – как устроен и для чего используется. Модель данных в MongoDB. Типы данных в Redis. Процесс записи данных в Redis. Процесс чтения данных в Redis. Процесс удаления данных из Redis. За счет чего достигается высокая производительность. Как организовать очередь сообщений через Redis. Как в Java работать с Redis.
3.  Реализовать endpoint в TaskController, которому при запросе передаётся boostrapServers и название топика. В endpoint создаётся consumer Kafka, который читает топик, начиная с самых старых сообщений. Далее в MongoDB находим документ, который содержит в поле test_field значение из первого сообщения Kafka ("test") и возвращаем в endpoint значение поля test_value_field из документа MongoDB

ВОПРОС 1

работа с коллекциями обеспечивается с помощью интерфейсов Collection, List, Set, Queue и утилитных классов Collections и Arrays. Эти инструменты позволяют удобно обрабатывать данные, упрощая сортировку, поиск, изменение и другие операции.
1. Основные методы коллекций (Collection, List, Set, Queue)

Интерфейс Collection определяет базовые операции, доступные для всех коллекций:

    add(E e) — добавление элемента;

    remove(Object o) — удаление элемента;

    contains(Object o) — проверка наличия элемента;

    size() — получение количества элементов;

    isEmpty() — проверка на пустоту;

    clear() — очистка коллекции;

    iterator() — получение итератора;

    toArray() — преобразование в массив.

Дополнительные методы, например get(int index), определяются в интерфейсах List или Queue.
2. Класс Collections

Collections — это утилитный класс из пакета java.util, предоставляющий статические методы для работы с коллекциями. Примеры основных методов:

    Collections.sort(List<T> list) — сортировка списка;

    Collections.reverse(List<?> list) — обратный порядок элементов;

    Collections.shuffle(List<?> list) — случайное перемешивание;

    Collections.max(Collection<?>), Collections.min(Collection<?>) — поиск максимума/минимума;

    Collections.binarySearch(List<?>, key) — двоичный поиск;

    Collections.unmodifiableList(List) — создание неизменяемого списка;

    Collections.synchronizedList(List) — создание потокобезопасного списка.

Все методы являются статическими и работают с интерфейсами коллекций.
3. Класс Arrays

Класс Arrays предоставляет аналогичные утилиты, но только для обычных массивов (int[], String[] и т.д.). Основные методы:

    Arrays.sort(array) — сортировка массива;

    Arrays.toString(array) — преобразование массива в строку;

    Arrays.equals(arr1, arr2) — сравнение массивов на равенство;

    Arrays.copyOf(array, newLength) — копирование массива;

    Arrays.fill(array, value) — заполнение массива значением;

    Arrays.asList(T... a) — преобразование массива в список фиксированной длины.


ВОПРОС 2
1. Что такое Redis и для чего используется

Redis (REmote DIctionary Server) — это высокопроизводительное хранилище данных типа key-value, работающее в оперативной памяти. Redis используется как:

    кэш (например, для ускорения доступа к часто используемым данным),

    база данных (для небольших и сверхбыстрых приложений),

    брокер сообщений (через механизм pub/sub и очереди),

    счётчики, TTL-хранилища, хранение сессий и др.

2. Модель данных в MongoDB -- (тут опечатка?)

MongoDB — это документно-ориентированная NoSQL база данных. Основные особенности модели данных:

    Данные хранятся в формате BSON (расширенный бинарный JSON).

    Документы объединяются в коллекции (аналог таблиц).

    Каждый документ может иметь уникальную структуру.

    Поддерживаются вложенные документы и массивы.

    Нет фиксированной схемы, структура может быть гибкой и динамической.

3. Типы данных в Redis

Redis поддерживает несколько основных типов данных:

    String — строка (до 512 МБ).

    List — список строк, упорядоченный (двусвязный список).

    Set — неупорядоченное множество уникальных строк.

    Sorted Set (ZSet) — множество с уникальными элементами и баллами (score), по которым сортируются.

    Hash — ассоциативный массив (ключ-значение) внутри ключа Redis.

    Stream — лог структурированных сообщений.

    Bitmap, HyperLogLog, Geo — специализированные структуры.

4. Процессы в Redis

    Запись (SET): данные записываются в оперативную память и, если настроено, периодически сохраняются на диск (RDB/AOF).

    Чтение (GET): выполняется напрямую из памяти, что обеспечивает минимальную задержку (обычно <1 мс).

    Удаление (DEL): ключ удаляется из памяти; Redis также может автоматически удалять по TTL (время жизни ключа).

5. Высокая производительность Redis

Redis обеспечивает высокую производительность благодаря:

    Работа в однопоточном режиме, избегая блокировок.

    Все операции выполняются в памяти, без обращения к диску.

    Использование простейших структур данных и оптимизированных алгоритмов.

    Поддержка пакетной обработки (pipelining).

    Возможность шардирования (Redis Cluster) и репликации.

6. Очередь сообщений через Redis

Redis можно использовать как брокер очередей:

    Через тип List: LPUSH (добавить в очередь), RPOP (извлечь из очереди).

    Через Stream: поддерживает группировку потребителей, подтверждения, автоповтор и т.д.

    Пример простой очереди:

    LPUSH queue "message1"
    RPOP queue

7. Работа с Redis в Java

Для взаимодействия с Redis в Java чаще всего используется библиотека Lettuce или Jedis.

Пример с использованием Jedis:

Jedis jedis = new Jedis("localhost", 6379);

// Запись
jedis.set("key", "value");

// Чтение
String value = jedis.get("key");

// Удаление
jedis.del("key");

// Работа со списком как с очередью
jedis.lpush("queue", "message1");
String msg = jedis.rpop("queue");

Также Redis можно подключить через Spring Boot с помощью зависимостей spring-boot-starter-data-redis.